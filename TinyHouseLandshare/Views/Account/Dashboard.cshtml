@model UserListingsViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="flex flex-col text-center">
    <h1 class="text-xl">Dashboard</h1>
    <br />
    @if (Model.SeekerListing is null)
    {
        @Html.ActionLink("Create Seeker Listing", "createlisting", "seeker", null, new {@class="mx-auto m-4 px-4 py-2 text-white bg-green-700 rounded-sm duration-300 hover:bg-green-800"}) 
    }
    @Html.ActionLink("Create Land Listing", "createlisting", "Land", null, new {@class="mx-auto m-4 px-4 py-2 text-white bg-green-700 rounded-sm duration-300 hover:bg-green-800"})
</div>


<div class="">

    <h1 class="text-xl m-4">Seeker Listing</h1>
    <div class="flex flex-col sm:flex-row sm:max-w-3xl border border-gray-50 shadow-md  space-x-4 p-4">
        @if(Model.SeekerListing is not null)
        {
                
                <img src="~/img/placeholder-image.png" class="w-80 border border-gray-200 bg-green-100" title="seeker main image"/>
                
                <div class="flex flex-col">
                    <div class="flex flex-row ">
                        <div>
                            <h1><a asp-controller="seeker" asp-action="listing" asp-route-id="@Model.SeekerListing.Id" >@Model.SeekerListing.Title</a></h1>
                            <p>@Model.SeekerListing.Id</p>
                            <p>@Model.SeekerListing.Location, @Model.SeekerListing.State, @Model.SeekerListing.Country</p>
                            <p>Created: @Model.SeekerListing.CreatedTime.Date.ToString("MMM dd yyyy")</p>
                            <p>Modified: @Model.SeekerListing.ModifiedTime.Date.ToString("MMM dd yyyy")</p>
                        </div>
                        <div>
                            <p>@Model.SeekerListing.Status</p>
                            <p>Submitted: @Model.SeekerListing.Submitted</p>
                            <p>Approved: @Model.SeekerListing.Approved</p>
                        </div>
                    </div>
                    <div class="grow"> </div>
                    <div class="flex flex-row">
                        @Html.ActionLink("Edit", 
                                          "EditListing", 
                                          "Seeker", 
                                          new{ Model.SeekerListing.Id},
                                          new{ @class="m-2 px-4 py-2 text-white bg-yellow-500 shadow-md rounded-sm duration-300 hover:bg-yellow-600"})
                        @if(Model.SeekerListing.Submitted is false)
                        {
                            @Html.ActionLink("Submit for Approval", 
                                          "SubmitApproval", 
                                          "Seeker", 
                                          new{ Model.SeekerListing.Id},
                                          new{ @class="m-2 px-4 py-2 text-white bg-green-700 shadow-md rounded-sm duration-300 hover:bg-green-800"})
                        }
                        else
                        {
                            @*if(Model.SeekerListing.Approved is false)
                            {
                            <button type="button" class="m-2 px-4 py-2 text-white bg-green-700 shadow-md rounded-sm duration-300 hover:bg-green-800" disabled>Submit for Approval2</button>
                            }*@
                        }

                        @Html.ActionLink("Delete", 
                                          "DeleteListing", 
                                          "Seeker", 
                                          new{ Model.SeekerListing.Id},
                new{ @class="m-2 px-4 py-2 text-white bg-red-700 shadow-md  rounded-sm duration-300 hover:bg-red-800"})
                        </div>
                    
                </div>
        }
        else
        {
                <p>There is no seeker listing to show</p>
        }
    </div>

    @if(Model.LandListings.Any() is true)
    {
        <h1 class="text-xl m-4">Land Listings</h1>
        <div class="flex flex-row flex-wrap">
            @foreach(var landListing in Model.LandListings)
            {
                <div class="flex flex-row w-full md:w-1/2 xl:w-1/3">
                    <!-- Land Listing Card -->
                    <div class="flex flex-col m-2 w-full border border-gray-50 bg-white p-6 shadow-md hover:shadow-lg">
                        @if(landListing.ImageSrc is not null)
                        {
                            <img src="@landListing.ImageSrc" class="w-full bg-green-100 border border-gray-100 mx-auto mb-4" title="land main image" />
                            
                        }else
                        {
                            <img src="~/img/placeholder-image.png" class="w-full bg-green-100 border border-gray-100 mx-auto mb-4" title="land main image"/>
                        }
                        <a asp-controller="land" asp-action="listing" asp-route-id="@landListing.Id">@landListing.Title <br/>(@landListing.Id)</a>
                        <p>@landListing.Location, @landListing.State, @landListing.Country</p>
                        <p>@landListing.CreatedTime.Date.ToString("MMM dd yyyy")</p>
                        <h1>Status</h1>
                        <div></div>
                        <div class="flex flex-col text-left mb-6">
                       
                            @if (landListing.Status == "Edited Draft")
                            {
                                <div>
                                    <i class="fa-solid fa-circle-check text-yellow-500"></i>
                                    <span>Edited Draft</span>
                                </div>
                            }
                            else if (landListing.Status == "Submitted")
                            {
                                @*<div>
                                    <i class="fa-solid fa-circle-check text-yellow-500"></i>
                                    <span>Pending Approval</span>
                                </div>*@
                            }else if(landListing.Status.StartsWith("Rejected"))
                            {
                                 <div>
                                    <i class="fa-sharp fa-solid fa-circle-exclamation text-yellow-500"></i>
                                    <span>Rejected, please revise</span>
                                </div>
                            }

                            @if (landListing.Submitted)
                            {
                                <div>
                                    <i class="fa-solid fa-circle-check text-green-500"></i>
                                    <span>Submitted</span>
                                </div>
                            }
                            else
                            {
                                <div>
                                    <i class="fa-sharp fa-solid fa-circle-exclamation text-yellow-500"></i>
                                    <span>Pending Submission</span>
                                </div>
                            }
                            @if (landListing.Approved)
                            {
                                <div>
                                    <i class="fa-solid fa-circle-check text-green-500"></i>
                                    <span>Approved</span>
                                </div>
                            }
                            else
                            {
                                <div>
                                    <i class="fa-sharp fa-solid fa-circle-exclamation text-yellow-500"></i>
                                    <span>Not Yet Approved</span>
                                </div>
                            }

                            @if (landListing.Status == "Posted")
                            {
                                <div>
                                    <i class="fa-solid fa-circle-check text-green-500"></i>
                                    <span>Posted</span>
                                </div>
                            }
                        
                        </div>
                    
                        <div class="flex flex-row justify-center">
                            @if (landListing.Submitted is false && landListing.Approved is false)
                            {
                                @Html.ActionLink("Submit for Approval",
                                                 "SubmitApproval",
                                                 "Land",
                                                 new { landListing.Id },
                                                 new { @class = " m-2 px-4 py-2 text-white bg-green-700 shadow-md rounded-sm duration-300 hover:bg-green-800"})
                            }
                            else
                            {
                                if (landListing.Approved is false && landListing.Status.StartsWith("Rejected"))
                                {
                                    <button type="button" class=" m-2 px-4 py-2 text-white bg-green-700 shadow-md rounded-sm duration-300 hover:bg-green-800" disabled>Submit for Approval</button>
                                }
                            }
                            @Html.ActionLink("Edit",
                                             "EditListing",
                                             "Land",
                                             new{ landListing.Id},
                                             new{ @class=" m-2 px-4 py-2 text-white bg-yellow-500 shadow-md rounded-sm duration-300 hover:bg-yellow-600"})

                            @Html.ActionLink("Delete",
                                             "DeleteListing",
                                             "Land",
                                             new{ landListing.Id},
                                             new{ @class=" m-2 px-4 py-2 text-white bg-red-700 shadow-md  rounded-sm duration-300 hover:bg-red-800"})
                        </div>
                    </div> 
                </div>
            }
        </div>
    }
    else
    {
        <div>
            <p>There are no land listings to show</p>
        </div>
    }

</div>



